"use strict";var e=require("react"),t=require("pdfjs-dist");function n(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r,o=n(e),a=n(t);exports.AnnotationType=void 0,(r=exports.AnnotationType||(exports.AnnotationType={}))[r.Text=1]="Text",r[r.Link=2]="Link",r[r.FreeText=3]="FreeText",r[r.Line=4]="Line",r[r.Square=5]="Square",r[r.Circle=6]="Circle",r[r.Polygon=7]="Polygon",r[r.Polyline=8]="Polyline",r[r.Highlight=9]="Highlight",r[r.Underline=10]="Underline",r[r.Squiggly=11]="Squiggly",r[r.StrikeOut=12]="StrikeOut",r[r.Stamp=13]="Stamp",r[r.Caret=14]="Caret",r[r.Ink=15]="Ink",r[r.Popup=16]="Popup",r[r.FileAttachment=17]="FileAttachment";var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s,l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};exports.TextDirection=void 0,(s=exports.TextDirection||(exports.TextDirection={})).RightToLeft="RTL",s.LeftToRight="LTR";var u,p=o.createContext({currentTheme:"light",direction:exports.TextDirection.LeftToRight,setCurrentTheme:function(){}}),d=function(e){var t=[];return Object.keys(e).forEach((function(n){n&&e[n]&&t.push(n)})),t.join(" ")},f="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,g=function(e){var t=o.useRef(null),n=e.once,r=e.threshold,a=e.onVisibilityChanged;return f((function(){var e=t.current;if(e){var o=new IntersectionObserver((function(t){t.forEach((function(t){var r=t.isIntersecting,i=t.intersectionRatio;a({isVisible:r,ratio:i}),r&&n&&(o.unobserve(e),o.disconnect())}))}),{threshold:r||0});return o.observe(e),function(){o.unobserve(e),o.disconnect()}}}),[]),t},v=function(e){var t=e.children,n=e.ignoreDirection,r=void 0!==n&&n,a=e.size,i=void 0===a?24:a,c=o.useContext(p).direction,s=!r&&c===exports.TextDirection.RightToLeft,l="".concat(i||24,"px");return o.createElement("svg",{"aria-hidden":"true",className:d({"rpv-core__icon":!0,"rpv-core__icon--rtl":s}),focusable:"false",height:l,viewBox:"0 0 24 24",width:l},t)},h=function(){return o.createElement(v,{size:16},o.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},m=function(e){var t=e.children,n=e.testId,r=e.onClick,a=o.useContext(p).direction===exports.TextDirection.RightToLeft,i=n?{"data-testid":n}:{};return o.createElement("button",l({className:d({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":a}),type:"button",onClick:r},i),t)},x=function(e){var t=e.size,n=void 0===t?"4rem":t,r=e.testId,a=o.useState(!1),i=a[0],c=a[1],s=r?{"data-testid":r}:{},u=g({onVisibilityChanged:function(e){c(e.isVisible)}});return o.createElement("div",l({},s,{className:d({"rpv-core__spinner":!0,"rpv-core__spinner--animating":i}),ref:u,style:{height:n,width:n}}))},w=function(e){var t=e.ariaLabel,n=void 0===t?"":t,r=e.autoFocus,a=void 0!==r&&r,i=e.placeholder,c=void 0===i?"":i,s=e.testId,u=e.type,g=void 0===u?"text":u,v=e.value,h=void 0===v?"":v,m=e.onChange,x=e.onKeyDown,w=void 0===x?function(){}:x,_=o.useContext(p).direction,y=o.useRef(),b=_===exports.TextDirection.RightToLeft,E={ref:y,"data-testid":"","aria-label":n,className:d({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":b}),placeholder:c,value:h,onChange:function(e){return m(e.target.value)},onKeyDown:w};return s&&(E["data-testid"]=s),f((function(){if(a){var e=y.current;if(e){var t=window.scrollX,n=window.scrollY;e.focus(),window.scrollTo(t,n)}}}),[]),"text"===g?o.createElement("input",l({type:"text"},E)):o.createElement("input",l({type:"password"},E))},_=function(){var e=o.useRef(!1);return o.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),e},y=function(e){var t=o.useRef(e);return o.useEffect((function(){t.current=e}),[e]),t.current};!function(e){e.NotRenderedYet="NotRenderedYet",e.Rendering="Rendering",e.Rendered="Rendered"}(u||(u={}));var b,E=-9999,R=function(e){var t=e.doc,n=t.numPages,r=t.loadingTask.docId,a=o.useMemo((function(){return Array(n).fill(null).map((function(e,t){return{pageIndex:t,renderStatus:u.NotRenderedYet,visibility:E}}))}),[r]),i=o.useRef({currentRenderingPage:-1,startRange:0,endRange:n-1,visibilities:a}),c=function(e,t){i.current.visibilities[e].visibility=t};return{getHighestPriorityPage:function(){var e=i.current.visibilities.slice(i.current.startRange,i.current.endRange+1).filter((function(e){return e.visibility>E}));if(!e.length)return-1;for(var t=e[0].pageIndex,r=e[e.length-1].pageIndex,o=e.length,a=0;a<o;a++){if(e[a].renderStatus===u.Rendering)return-1;if(e[a].renderStatus===u.NotRenderedYet)return e[a].pageIndex}return r+1<n&&i.current.visibilities[r+1].renderStatus!==u.Rendered?r+1:t-1>=0&&i.current.visibilities[t-1].renderStatus!==u.Rendered?t-1:-1},isInRange:function(e){return e>=i.current.startRange&&e<=i.current.endRange},markNotRendered:function(){for(var e=0;e<n;e++)i.current.visibilities[e].renderStatus=u.NotRenderedYet},markRendered:function(e){i.current.visibilities[e].renderStatus=u.Rendered},markRendering:function(e){-1!==i.current.currentRenderingPage&&i.current.currentRenderingPage!==e&&i.current.visibilities[i.current.currentRenderingPage].renderStatus===u.Rendering&&(i.current.visibilities[i.current.currentRenderingPage].renderStatus=u.NotRenderedYet),i.current.visibilities[e].renderStatus=u.Rendering,i.current.currentRenderingPage=e},setOutOfRange:function(e){c(e,E)},setRange:function(e,t){i.current.startRange=e,i.current.endRange=t;for(var r=0;r<n;r++)(r<e||r>t)&&(i.current.visibilities[r].visibility=E,i.current.visibilities[r].renderStatus=u.NotRenderedYet)},setVisibility:c}},P={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},k=o.createContext({l10n:P,setL10n:function(){}}),S=0,C=function(){return S++},M=function(e,t,n){var r=function(e){var r=t.current;if(r){var o=e.target;if(o instanceof Element&&o.shadowRoot){var a=e.composedPath();a.length>0&&!r.contains(a[0])&&n()}else r.contains(o)||n()}};o.useEffect((function(){if(e){var t={capture:!0};return document.addEventListener("click",r,t),function(){document.removeEventListener("click",r,t)}}}),[])},T=function(e){var t=function(t){"Escape"===t.key&&e()};o.useEffect((function(){return document.addEventListener("keyup",t),function(){document.removeEventListener("keyup",t)}}),[])},L=function(e){var t=e.ariaControlsSuffix,n=e.children,r=e.closeOnClickOutside,a=e.closeOnEscape,i=e.onToggle,c=o.useRef(),s=o.useContext(p).direction===exports.TextDirection.RightToLeft;return o.useEffect((function(){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}),[]),T((function(){c.current&&a&&i()})),M(r,c,i),f((function(){var e=c.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]),o.createElement("div",{"aria-modal":"true",className:d({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":s}),id:"rpv-core__modal-body-".concat(t),ref:c,role:"dialog",tabIndex:-1},n)},O=function(e){var t=e.children;return o.createElement("div",{className:"rpv-core__modal-overlay"},t)};exports.ToggleStatus=void 0,(b=exports.ToggleStatus||(exports.ToggleStatus={})).Close="Close",b.Open="Open",b.Toggle="Toggle";var D,I=function(e){var t=o.useState(e),n=t[0],r=t[1];return{opened:n,toggle:function(e){switch(e){case exports.ToggleStatus.Close:r(!1);break;case exports.ToggleStatus.Open:r(!0);break;case exports.ToggleStatus.Toggle:default:r((function(e){return!e}))}}}},H=function(e){var t=e.content,n=e.isOpened,r=void 0!==n&&n,a=e.target,i=I(r),c=i.opened,s=i.toggle;return o.createElement(o.Fragment,null,a&&a(s,c),c&&t(s))};exports.Position=void 0,(D=exports.Position||(exports.Position={})).TopLeft="TOP_LEFT",D.TopCenter="TOP_CENTER",D.TopRight="TOP_RIGHT",D.RightTop="RIGHT_TOP",D.RightCenter="RIGHT_CENTER",D.RightBottom="RIGHT_BOTTOM",D.BottomLeft="BOTTOM_LEFT",D.BottomCenter="BOTTOM_CENTER",D.BottomRight="BOTTOM_RIGHT",D.LeftTop="LEFT_TOP",D.LeftCenter="LEFT_CENTER",D.LeftBottom="LEFT_BOTTOM";var A,V,N,z,B,F,W,j=function(e,t,n,r,o){f((function(){var a=t.current,i=e.current,c=n.current;if(i&&a&&c){var s=c.getBoundingClientRect(),l=function(e,t,n,r){var o=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=a.height,c=a.width,s=0,l=0;switch(n){case exports.Position.TopLeft:s=o.top-i,l=o.left;break;case exports.Position.TopCenter:s=o.top-i,l=o.left+o.width/2-c/2;break;case exports.Position.TopRight:s=o.top-i,l=o.left+o.width-c;break;case exports.Position.RightTop:s=o.top,l=o.left+o.width;break;case exports.Position.RightCenter:s=o.top+o.height/2-i/2,l=o.left+o.width;break;case exports.Position.RightBottom:s=o.top+o.height-i,l=o.left+o.width;break;case exports.Position.BottomLeft:s=o.top+o.height,l=o.left;break;case exports.Position.BottomCenter:s=o.top+o.height,l=o.left+o.width/2-c/2;break;case exports.Position.BottomRight:s=o.top+o.height,l=o.left+o.width-c;break;case exports.Position.LeftTop:s=o.top,l=o.left-c;break;case exports.Position.LeftCenter:s=o.top+o.height/2-i/2,l=o.left-c;break;case exports.Position.LeftBottom:s=o.top+o.height-i,l=o.left-c}return{left:l+(r.left||0),top:s+(r.top||0)}}(i,a,r,o),u=l.top,p=l.left;i.style.top="".concat(u-s.top,"px"),i.style.left="".concat(p-s.left,"px")}}),[])},q=function(e){var t,n=e.customClassName,r=e.position;return o.createElement("div",{className:d((t={"rpv-core__arrow":!0,"rpv-core__arrow--tl":r===exports.Position.TopLeft,"rpv-core__arrow--tc":r===exports.Position.TopCenter,"rpv-core__arrow--tr":r===exports.Position.TopRight,"rpv-core__arrow--rt":r===exports.Position.RightTop,"rpv-core__arrow--rc":r===exports.Position.RightCenter,"rpv-core__arrow--rb":r===exports.Position.RightBottom,"rpv-core__arrow--bl":r===exports.Position.BottomLeft,"rpv-core__arrow--bc":r===exports.Position.BottomCenter,"rpv-core__arrow--br":r===exports.Position.BottomRight,"rpv-core__arrow--lt":r===exports.Position.LeftTop,"rpv-core__arrow--lc":r===exports.Position.LeftCenter,"rpv-core__arrow--lb":r===exports.Position.LeftBottom},t["".concat(n)]=""!==n,t))})},U=function(e){var t=e.ariaControlsSuffix,n=e.children,r=e.closeOnClickOutside,a=e.offset,i=e.position,c=e.targetRef,s=e.onClose,l=o.useRef(),u=o.useRef(),g=o.useRef(),v=o.useContext(p).direction===exports.TextDirection.RightToLeft;M(r,l,s),j(l,c,g,i,a),f((function(){var e=u.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight="".concat(t,"px"))}}),[]);var h="rpv-core__popover-body-inner-".concat(t);return o.createElement(o.Fragment,null,o.createElement("div",{ref:g,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{"aria-describedby":h,className:d({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":v}),id:"rpv-core__popover-body-".concat(t),ref:l,role:"dialog",tabIndex:-1},o.createElement(q,{customClassName:"rpv-core__popover-body-arrow",position:i}),o.createElement("div",{id:h,ref:u},n)))},Z=function(e){var t=e.closeOnEscape,n=e.onClose,r=o.useRef();return T((function(){r.current&&t&&n()})),o.createElement("div",{className:"rpv-core__popover-overlay",ref:r})},G=function(e){var t=e.ariaControlsSuffix,n=e.children,r=e.contentRef,a=e.offset,i=e.position,c=e.targetRef,s=o.useRef(),l=o.useContext(p).direction===exports.TextDirection.RightToLeft;return j(r,c,s,i,a),o.createElement(o.Fragment,null,o.createElement("div",{ref:s,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{className:d({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":l}),id:"rpv-core__tooltip-body-".concat(t),ref:r,role:"tooltip"},o.createElement(q,{customClassName:"rpv-core__tooltip-body-arrow",position:i}),o.createElement("div",{className:"rpv-core__tooltip-body-content"},n)))};exports.LayerRenderStatus=void 0,(A=exports.LayerRenderStatus||(exports.LayerRenderStatus={}))[A.PreRender=0]="PreRender",A[A.DidRender=1]="DidRender",exports.PageMode=void 0,(V=exports.PageMode||(exports.PageMode={})).Attachments="UseAttachments",V.Bookmarks="UseOutlines",V.ContentGroup="UseOC",V.Default="UserNone",V.FullScreen="FullScreen",V.Thumbnails="UseThumbs",exports.PasswordStatus=void 0,(N=exports.PasswordStatus||(exports.PasswordStatus={})).RequiredPassword="RequiredPassword",N.WrongPassword="WrongPassword",exports.RotateDirection=void 0,(z=exports.RotateDirection||(exports.RotateDirection={})).Backward="Backward",z.Forward="Forward",exports.ScrollMode=void 0,(B=exports.ScrollMode||(exports.ScrollMode={})).Page="Page",B.Horizontal="Horizontal",B.Vertical="Vertical",B.Wrapped="Wrapped",exports.SpecialZoomLevel=void 0,(F=exports.SpecialZoomLevel||(exports.SpecialZoomLevel={})).ActualSize="ActualSize",F.PageFit="PageFit",F.PageWidth="PageWidth",exports.ViewMode=void 0,(W=exports.ViewMode||(exports.ViewMode={})).DualPage="DualPage",W.DualPageWithCover="DualPageWithCover",W.SinglePage="SinglePage";var Y,J=function(e,t){return e.reduce((function(e,n,r){return r%t?e[e.length-1].push(n):e.push([n]),e}),[])},K=function(e,t){switch(t[1].name){case"XYZ":return{bottomOffset:function(e,n){return null===t[3]?n:t[3]},leftOffset:function(e,n){return null===t[2]?0:t[2]},pageIndex:e,scaleTo:t[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:exports.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:t[2],leftOffset:0,pageIndex:e,scaleTo:exports.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:e,scaleTo:1}}},X=new Map,Q=new Map,$=function(e,t){return"".concat(e.loadingTask.docId,"___").concat(t.num,"R").concat(0===t.gen?"":t.gen)},ee=function(e,t,n){X.set($(e,t),n)},te=function(e,t){if(!e)return Promise.reject("The document is not loaded yet");var n="".concat(e.loadingTask.docId,"___").concat(t),r=Q.get(n);return r?Promise.resolve(r):new Promise((function(r,o){e.getPage(t+1).then((function(o){Q.set(n,o),o.ref&&ee(e,o.ref,t),r(o)}))}))},ne=function(e,t){return new Promise((function(n){new Promise((function(n){"string"==typeof t?e.getDestination(t).then((function(e){n(e)})):n(t)})).then((function(r){if("object"==typeof r[0]&&null!==r[0]){var o=r[0],a=function(e,t){var n=$(e,t);return X.has(n)?X.get(n):null}(e,o);null===a?e.getPageIndex(o).then((function(r){ee(e,o,r),ne(e,t).then((function(e){return n(e)}))})):n(K(a,r))}else{var i=K(r[0],r);n(i)}}))}))};!function(e){e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Beveled=3]="Beveled",e[e.Inset=4]="Inset",e[e.Underline=5]="Underline"}(Y||(Y={}));var re,oe=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),ae=function(e,t,n,r){var o=parseInt(e,10);return o>=t&&o<=n?o:r},ie=function(e){return e.contentsObj?e.contentsObj.str:e.contents||""},ce=function(e){return e.titleObj?e.titleObj.str:e.title||""},se=function(e){var t=e.annotation,n=o.useContext(p).direction,r=ce(t),a=ie(t),i=n===exports.TextDirection.RightToLeft,c=o.useRef(),s="";if(t.modificationDate){var l=function(e){var t=oe.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=ae(t[2],1,12,1)-1,o=ae(t[3],1,31,1),a=ae(t[4],0,23,0),i=ae(t[5],0,59,0),c=ae(t[6],0,59,0),s=t[7]||"Z",l=ae(t[8],0,23,0),u=ae(t[9],0,59,0);switch(s){case"-":a+=l,i+=u;break;case"+":a-=l,i-=u}return new Date(Date.UTC(n,r,o,a,i,c))}(t.modificationDate);s=l?"".concat(l.toLocaleDateString(),", ").concat(l.toLocaleTimeString()):""}return o.useLayoutEffect((function(){if(c.current){var e=document.querySelector('[data-annotation-id="'.concat(t.id,'"]'));if(e){var n=e;return n.style.zIndex+=1,function(){n.style.zIndex="".concat(parseInt(n.style.zIndex,10)-1)}}}}),[]),o.createElement("div",{ref:c,className:d({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":i}),style:{top:t.annotationType===exports.AnnotationType.Popup?"":"100%"}},r&&o.createElement(o.Fragment,null,o.createElement("div",{className:d({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!i,"rpv-core__annotation-popup-title--rtl":i})},r),o.createElement("div",{className:"rpv-core__annotation-popup-date"},s)),a&&o.createElement("div",{className:"rpv-core__annotation-popup-content"},a.split("\n").map((function(e,t){return o.createElement(o.Fragment,{key:t},e,o.createElement("br",null))}))))};!function(e){e.Click="Click",e.Hover="Hover"}(re||(re={}));var le,ue=function(e){var t,n=e.annotation,r=e.children,a=e.ignoreBorder,i=e.hasPopup,c=e.isRenderable,s=e.page,l=e.viewport,u=n.rect,p=function(){var e=I(!1),t=e.opened,n=e.toggle,r=o.useState(re.Hover),a=r[0],i=r[1];return{opened:t,closeOnHover:function(){a===re.Hover&&n(exports.ToggleStatus.Close)},openOnHover:function(){a===re.Hover&&n(exports.ToggleStatus.Open)},toggleOnClick:function(){switch(a){case re.Click:t&&i(re.Hover),n(exports.ToggleStatus.Toggle);break;case re.Hover:i(re.Click),n(exports.ToggleStatus.Open)}}}}(),d=p.closeOnHover,f=p.opened,g=p.openOnHover,v=p.toggleOnClick,h=(t=[u[0],s.view[3]+s.view[1]-u[1],u[2],s.view[3]+s.view[1]-u[3]],[Math.min(t[0],t[2]),Math.min(t[1],t[3]),Math.max(t[0],t[2]),Math.max(t[1],t[3])]),m=u[2]-u[0],x=u[3]-u[1],w={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!a&&n.borderStyle.width>0){switch(n.borderStyle.style){case Y.Dashed:w.borderStyle="dashed";break;case Y.Solid:w.borderStyle="solid";break;case Y.Underline:w=Object.assign({borderBottomStyle:"solid"},w);case Y.Beveled:case Y.Inset:}var _=n.borderStyle.width;w.borderWidth="".concat(_,"px"),n.borderStyle.style!==Y.Underline&&(m-=2*_,x-=2*_);var y=n.borderStyle,b=y.horizontalCornerRadius,E=y.verticalCornerRadius;(b>0||E>0)&&(w.borderRadius="".concat(b,"px / ").concat(E,"px")),n.color?w.borderColor="rgb(".concat(0|n.color[0],", ").concat(0|n.color[1],", ").concat(0|n.color[2],")"):w.borderWidth="0"}return o.createElement(o.Fragment,null,c&&r({popup:{opened:f,closeOnHover:d,openOnHover:g,toggleOnClick:v},slot:{attrs:{style:Object.assign({height:"".concat(x,"px"),left:"".concat(h[0],"px"),top:"".concat(h[1],"px"),transform:"matrix(".concat(l.transform.join(","),")"),transformOrigin:"-".concat(h[0],"px -").concat(h[1],"px"),width:"".concat(m,"px")},w)},children:o.createElement(o.Fragment,null,i&&f&&o.createElement(se,{annotation:n}))}}))},pe=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c);return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},de=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c),u=t.rect,p=u[2]-u[0],d=u[3]-u[1],f=t.borderStyle.width;return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(p," ").concat(d),width:"".concat(p,"px")},o.createElement("circle",{cy:d/2,fill:"none",rx:p/2-f/2,ry:d/2-f/2,stroke:"transparent",strokeWidth:f||1})),e.slot.children)}))},fe=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=ce(t),i=ie(t),c=!(!1!==t.hasPopup||!a&&!i),s=function(){var e,n,r,o,a=t.file;a&&(e=a.filename,n=a.content,r="string"==typeof n?"":URL.createObjectURL(new Blob([n],{type:""})),(o=document.createElement("a")).style.display="none",o.href=r||e,o.setAttribute("download",function(e){var t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e}(e)),document.body.appendChild(o),o.click(),document.body.removeChild(o),r&&URL.revokeObjectURL(r))};return o.createElement(ue,{annotation:t,hasPopup:c,ignoreBorder:!0,isRenderable:!0,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onDoubleClick:s,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ge=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c);return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ve=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=ce(t),i=ie(t),c=!(!a&&!i),s=!t.parentType||-1!==["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(t.parentType);return f((function(){if(t.parentId){var e=document.querySelector('[data-annotation-id="'.concat(t.parentId,'"]')),n=document.querySelector('[data-annotation-id="'.concat(t.id,'"]'));if(e&&n){var r=parseFloat(e.style.left),o=parseFloat(e.style.top)+parseFloat(e.style.height);n.style.left="".concat(r,"px"),n.style.top="".concat(o,"px"),n.style.transformOrigin="-".concat(r,"px -").concat(o,"px")}}}),[]),o.createElement(ue,{annotation:t,hasPopup:s,ignoreBorder:!1,isRenderable:c,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":t.id}),o.createElement(se,{annotation:t}))}))},he=function(e){var t=e.annotation,n=e.childAnnotation,r=e.page,a=e.viewport,i=!1===t.hasPopup,c=ce(t),s=ie(t),u=!!(t.hasPopup||c||s);if(t.quadPoints&&t.quadPoints.length>0){var p=t.quadPoints.map((function(e){return Object.assign({},t,{rect:[e[2].x,e[2].y,e[1].x,e[1].y],quadPoints:[]})}));return o.createElement(o.Fragment,null,p.map((function(e,t){return o.createElement(he,{key:t,annotation:e,childAnnotation:n,page:r,viewport:a})})))}return o.createElement(ue,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:u,page:r,viewport:a},(function(e){return o.createElement(o.Fragment,null,o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children),n&&n.annotationType===exports.AnnotationType.Popup&&e.popup.opened&&o.createElement(ve,{annotation:n,page:r,viewport:a}))}))},me=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c),u=t.rect,p=u[2]-u[0],d=u[3]-u[1],f=t.borderStyle.width;return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.inkLists&&t.inkLists.length&&o.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(p," ").concat(d),width:"".concat(p,"px")},t.inkLists.map((function(e,t){return o.createElement("polyline",{key:t,fill:"none",stroke:"transparent",strokeWidth:f||1,points:e.map((function(e){return"".concat(e.x-u[0],",").concat(u[3]-e.y)})).join(" ")})}))),e.slot.children)}))},xe=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c),u=t.rect,p=u[2]-u[0],d=u[3]-u[1],f=t.borderStyle.width;return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(p," ").concat(d),width:"".concat(p,"px")},o.createElement("line",{stroke:"transparent",strokeWidth:f||1,x1:u[2]-t.lineCoordinates[0],x2:u[2]-t.lineCoordinates[2],y1:u[3]-t.lineCoordinates[1],y2:u[3]-t.lineCoordinates[3]})),e.slot.children)}))},we=/^([^\w]*)(javascript|data|vbscript)/im,_e=/&#(\w+)(^\w|;)?/g,ye=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,be=/^([^:]+):/gm,Ee=function(e,t){void 0===t&&(t="about:blank");var n,r=(n=e||"",n.replace(_e,(function(e,t){return String.fromCharCode(t)}))).replace(ye,"").trim();if(!r)return t;var o=r[0];if("."===o||"/"===o)return r;var a=r.match(be);if(!a)return r;var i=a[0];return we.test(i)?t:r},Re=function(e){var t,n=e.annotation,r=e.doc,a=e.outlines,i=e.page,c=e.viewport,s=e.onExecuteNamedAction,u=e.onJumpToDest,p=!!(n.url||n.dest||n.action||n.unsafeUrl),d={};if(n.url||n.unsafeUrl){var f=Ee(n.url||n.unsafeUrl,"");f?d={"data-target":"external",href:f,rel:"noopener noreferrer nofollow",target:n.newWindow?"_blank":"",title:f}:p=!1}else d={href:"","data-annotation-link":n.id,onClick:function(e){e.preventDefault(),n.action?s(n.action):ne(r,n.dest).then((function(e){var t=e.pageIndex,n=e.bottomOffset,r=e.leftOffset,o=e.scaleTo;u(t,n,r,o)}))}};var g=a&&a.length&&n.dest&&"string"==typeof n.dest?null===(t=a.find((function(e){return e.dest===n.dest})))||void 0===t?void 0:t.title:"";return g&&(d=Object.assign({},d,{title:g,"aria-label":g})),o.createElement(ue,{annotation:n,hasPopup:!1,ignoreBorder:!1,isRenderable:p,page:i,viewport:c},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":n.id,"data-testid":"core__annotation--link-".concat(n.id)}),o.createElement("a",l({},d)))}))},Pe=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c),u=t.rect,p=u[2]-u[0],d=u[3]-u[1],f=t.borderStyle.width;return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&o.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(p," ").concat(d),width:"".concat(p,"px")},o.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:f||1,points:t.vertices.map((function(e){return"".concat(e.x-u[0],",").concat(u[3]-e.y)})).join(" ")})),e.slot.children)}))},ke=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c),u=t.rect,p=u[2]-u[0],d=u[3]-u[1],f=t.borderStyle.width;return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&o.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(p," ").concat(d),width:"".concat(p,"px")},o.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:f||1,points:t.vertices.map((function(e){return"".concat(e.x-u[0],",").concat(u[3]-e.y)})).join(" ")})),e.slot.children)}))},Se=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c),u=t.rect,p=u[2]-u[0],d=u[3]-u[1],f=t.borderStyle.width;return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:"".concat(d,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(p," ").concat(d),width:"".concat(p,"px")},o.createElement("rect",{height:d-f,fill:"none",stroke:"transparent",strokeWidth:f||1,x:f/2,y:f/2,width:p-f})),e.slot.children)}))},Ce=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c);return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Me=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c);return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Te=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c);return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Le=function(){return o.createElement(v,{size:16},o.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),o.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),o.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),o.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Oe=function(){return o.createElement(v,{size:16},o.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),o.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),o.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),o.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),o.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),o.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),o.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),o.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),o.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),o.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},De=function(){return o.createElement(v,{size:16},o.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),o.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Ie=function(){return o.createElement(v,{size:16},o.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),o.createElement("path",{d:"M6 4.5L6 0.5"}),o.createElement("path",{d:"M18 4.5L18 0.5"}),o.createElement("path",{d:"M10 4.5L10 0.5"}),o.createElement("path",{d:"M14 4.5L14 0.5"}))},He=function(){return o.createElement(v,{size:16},o.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),o.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),o.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Ae=function(){return o.createElement(v,{size:16},o.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},Ve=function(e){var t=e.annotation,n=e.childAnnotation,r=e.page,a=e.viewport,i=!1===t.hasPopup,c=ce(t),s=ie(t),u=!!(t.hasPopup||c||s),p=t.name?t.name.toLowerCase():"";return o.createElement(ue,{annotation:t,hasPopup:i,ignoreBorder:!1,isRenderable:u,page:r,viewport:a},(function(e){return o.createElement(o.Fragment,null,o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),p&&o.createElement("div",{className:"rpv-core__annotation-text-icon"},"check"===p&&o.createElement(h,null),"comment"===p&&o.createElement(Le,null),"help"===p&&o.createElement(Oe,null),"insert"===p&&o.createElement(Ae,null),"key"===p&&o.createElement(De,null),"note"===p&&o.createElement(Ie,null),("newparagraph"===p||"paragraph"===p)&&o.createElement(He,null)),e.slot.children),n&&n.annotationType===exports.AnnotationType.Popup&&e.popup.opened&&o.createElement(ve,{annotation:n,page:r,viewport:a}))}))},Ne=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=ce(t),c=ie(t),s=!!(t.hasPopup||i||c);return o.createElement(ue,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:s,page:n,viewport:r},(function(e){return o.createElement("div",l({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ze=function(e){var t=e.annotations,n=e.doc,r=e.outlines,a=e.page,i=e.pageIndex,c=e.plugins,s=e.rotation,l=e.scale,u=e.onExecuteNamedAction,p=e.onJumpToDest,d=o.useRef(),g=a.getViewport({rotation:s,scale:l}).clone({dontFlip:!0}),v=t.filter((function(e){return!e.parentId}));return f((function(){var e=d.current;e&&c.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender({annotations:v,container:e,pageIndex:i,rotation:s,scale:l})}))}),[]),o.createElement("div",{ref:d,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(i)},v.map((function(e){var i=t.find((function(t){return t.parentId===e.id}));switch(e.annotationType){case exports.AnnotationType.Caret:return o.createElement(pe,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Circle:return o.createElement(de,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.FileAttachment:return o.createElement(fe,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.FreeText:return o.createElement(ge,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Highlight:return o.createElement(he,{key:e.id,annotation:e,childAnnotation:i,page:a,viewport:g});case exports.AnnotationType.Ink:return o.createElement(me,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Line:return o.createElement(xe,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Link:return o.createElement(Re,{key:e.id,annotation:e,doc:n,outlines:r,page:a,viewport:g,onExecuteNamedAction:u,onJumpToDest:p});case exports.AnnotationType.Polygon:return o.createElement(Pe,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Polyline:return o.createElement(ke,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Popup:return o.createElement(ve,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Square:return o.createElement(Se,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Squiggly:return o.createElement(Ce,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Stamp:return o.createElement(Me,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.StrikeOut:return o.createElement(Te,{key:e.id,annotation:e,page:a,viewport:g});case exports.AnnotationType.Text:return o.createElement(Ve,{key:e.id,annotation:e,childAnnotation:i,page:a,viewport:g});case exports.AnnotationType.Underline:return o.createElement(Ne,{key:e.id,annotation:e,page:a,viewport:g});default:return o.createElement(o.Fragment,{key:e.id})}})))},Be=function(e){var t=e.page,n=e.renderAnnotations,r=_(),a=o.useState({loading:!0,annotations:[]}),i=a[0],c=a[1];return o.useEffect((function(){t.getAnnotations({intent:"display"}).then((function(e){r.current&&c({loading:!1,annotations:e})}))}),[]),i.loading?o.createElement(o.Fragment,null):n(i.annotations)},Fe=function(e){var t=e.doc,n=e.outlines,r=e.page,a=e.pageIndex,i=e.plugins,c=e.rotation,s=e.scale,l=e.onExecuteNamedAction,u=e.onJumpToDest;return o.createElement(Be,{page:r,renderAnnotations:function(e){return o.createElement(ze,{annotations:e,doc:t,outlines:n,page:r,pageIndex:a,plugins:i,rotation:c,scale:s,onExecuteNamedAction:l,onJumpToDest:u})}})},We=function(e,t){var n=e%t;return 0===n?e:Math.floor(e-n)},je=function(e){var t=e.canvasLayerRef,n=e.height,r=e.page,a=e.pageIndex,i=e.plugins,c=e.rotation,s=e.scale,l=e.width,u=e.onRenderCanvasCompleted,p=o.useRef();return f((function(){var e=p.current;e&&e.cancel();var n=t.current;n.removeAttribute("data-testid"),i.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:n,pageIndex:a,rotation:c,scale:s,status:exports.LayerRenderStatus.PreRender})}));var o=r.getViewport({rotation:c,scale:s}),l=window.devicePixelRatio||1,d=Math.sqrt(16777216/(o.width*o.height)),f=l>d;f?n.style.transform="scale(1, 1)":n.style.removeProperty("transform");var g=Math.min(d,l),v=function(e,t){var n,r;if(Math.floor(e)===e)return[e,1];var o=1/e;if(o>t)return[1,t];if(Math.floor(o)===o)return[1,o];for(var a=e>1?o:e,i=0,c=1,s=1,l=1;;){var u=i+s,p=c+l;if(p>t)break;a<=u/p?(s=(n=[u,p])[0],l=n[1]):(i=(r=[u,p])[0],c=r[1])}return a<(i/c+s/l)/2?a===e?[i,c]:[c,i]:a===e?[s,l]:[l,s]}(g,8),h=v[0],m=v[1];n.width=We(o.width*g,h),n.height=We(o.height*g,h),n.style.width="".concat(We(o.width,m),"px"),n.style.height="".concat(We(o.height,m),"px"),n.hidden=!0;var x=n.getContext("2d",{alpha:!1}),w=f||1!==l?[g,0,0,g,0,0]:null;return p.current=r.render({canvasContext:x,transform:w,viewport:o}),p.current.promise.then((function(){n.hidden=!1,n.setAttribute("data-testid","core__canvas-layer-".concat(a)),i.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:n,pageIndex:a,rotation:c,scale:s,status:exports.LayerRenderStatus.DidRender})})),u()}),(function(){u()})),function(){n&&(n.width=0,n.height=0)}}),[]),o.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(n,"px"),width:"".concat(l,"px")}},o.createElement("canvas",{ref:t}))},qe=function(e){var t=e.height,n=e.page,r=e.rotation,i=e.scale,c=e.width,s=o.useRef();return f((function(){var e=s.current,o=n.getViewport({rotation:r,scale:i});n.getOperatorList().then((function(r){!function(){var e=s.current;e&&(e.innerHTML="")}(),new a.SVGGraphics(n.commonObjs,n.objs).getSVG(r,o).then((function(n){n.style.height="".concat(t,"px"),n.style.width="".concat(c,"px"),e.appendChild(n)}))}))}),[]),o.createElement("div",{className:"rpv-core__svg-layer",ref:s})},Ue=function(e){var t=e.containerRef,n=e.page,r=e.pageIndex,i=e.plugins,c=e.rotation,s=e.scale,l=e.onRenderTextCompleted,u=o.useRef(),p=function(){var e=t.current;e&&([].slice.call(e.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(t){return e.removeChild(t)})),[].slice.call(e.querySelectorAll('br[role="presentation"]')).forEach((function(t){return e.removeChild(t)})))};return f((function(){var e=u.current;e&&e.cancel();var o=t.current;if(o){o.removeAttribute("data-testid");var d=n.getViewport({rotation:c,scale:s});return i.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:o,pageIndex:r,scale:s,status:exports.LayerRenderStatus.PreRender})})),n.getTextContent().then((function(e){p(),u.current=a.renderTextLayer({container:o,textContent:e,textContentSource:e,viewport:d}),u.current.promise.then((function(){o.setAttribute("data-testid","core__text-layer-".concat(r)),[].slice.call(o.children).forEach((function(e){e.classList.contains("rpv-core__text-layer-text--not")||e.classList.add("rpv-core__text-layer-text")})),i.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:o,pageIndex:r,scale:s,status:exports.LayerRenderStatus.DidRender})})),l()}),(function(){o.removeAttribute("data-testid"),l()}))})),function(){var e;p(),null===(e=u.current)||void 0===e||e.cancel()}}}),[]),o.createElement("div",{className:"rpv-core__text-layer",ref:t})},Ze=function(e){var t=e.doc,n=e.measureRef,r=e.outlines,a=e.pageIndex,i=e.pageRotation,c=e.pageSize,s=e.plugins,l=e.renderPage,u=e.renderQueueKey,p=e.rotation,f=e.scale,g=e.shouldRender,v=e.viewMode,h=e.onExecuteNamedAction,m=e.onJumpToDest,w=e.onRenderCompleted,y=e.onRotatePage,b=_(),E=o.useState(null),R=E[0],P=E[1],k=o.useState(!1),S=k[0],C=k[1],M=o.useState(!1),T=M[0],L=M[1],O=o.useRef(),D=o.useRef(),I=Math.abs(p+i)%180==0,H=c.pageWidth*f,A=c.pageHeight*f,V=I?H:A,N=I?A:H,z=(c.rotation+p+i)%360,B=o.useRef(0),F=l||function(e){return o.createElement(o.Fragment,null,e.canvasLayer.children,e.textLayer.children,e.annotationLayer.children)};return o.useEffect((function(){P(null),C(!1),L(!1)}),[i,p,f]),o.useEffect((function(){g&&b.current&&!R&&te(t,a).then((function(e){b.current&&(B.current=u,P(e))}))}),[g,R]),o.useEffect((function(){S&&T&&(u!==B.current?(P(null),C(!1),L(!1)):w(a))}),[S,T]),o.createElement("div",{className:d({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":v===exports.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":v===exports.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":v===exports.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(a),ref:n,style:{height:"".concat(N,"px"),width:"".concat(V,"px")}},R?o.createElement(o.Fragment,null,F({annotationLayer:{attrs:{},children:o.createElement(Fe,{doc:t,outlines:r,page:R,pageIndex:a,plugins:s,rotation:z,scale:f,onExecuteNamedAction:h,onJumpToDest:m})},canvasLayer:{attrs:{},children:o.createElement(je,{canvasLayerRef:O,height:N,page:R,pageIndex:a,plugins:s,rotation:z,scale:f,width:V,onRenderCanvasCompleted:function(){b.current&&C(!0)}})},canvasLayerRendered:S,doc:t,height:N,pageIndex:a,rotation:z,scale:f,svgLayer:{attrs:{},children:o.createElement(qe,{height:N,page:R,rotation:z,scale:f,width:V})},textLayer:{attrs:{},children:o.createElement(Ue,{containerRef:D,page:R,pageIndex:a,plugins:s,rotation:z,scale:f,onRenderTextCompleted:function(){b.current&&L(!0)}})},textLayerRendered:T,width:V,markRendered:w,onRotatePage:function(e){return y(a,e)}}),s.map((function(e,n){return e.renderPageLayer?o.createElement(o.Fragment,{key:n},e.renderPageLayer({canvasLayerRef:O,canvasLayerRendered:S,doc:t,height:N,pageIndex:a,rotation:z,scale:f,textLayerRef:D,textLayerRendered:T,width:V})):o.createElement(o.Fragment,{key:n})}))):o.createElement(x,{testId:"core__page-layer-loading-".concat(a)}))},Ge=function(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e};!function(e){e.Horizontal="Horizontal",e.Vertical="Vertical",e.Both="Both"}(le||(le={}));var Ye=function(e){return 1-Math.pow(1-e,4)},Je=1e-4,Ke={left:0,top:0},Xe={capture:!1,passive:!0},Qe=function(e){var t=e.elementRef,n=e.isRtl,r=e.scrollDirection,a=e.onSmoothScroll,i=function(e){var t=_(),n=o.useRef(0),r=o.useState(e),a=r[0],i=r[1],c=o.useCallback((function(e){cancelAnimationFrame(n.current),n.current=requestAnimationFrame((function(){t.current&&i(e)}))}),[]);return o.useEffect((function(){return function(){cancelAnimationFrame(n.current)}}),[]),[a,c]}(Ke),c=i[0],s=i[1],l=o.useState(t.current),u=l[0],p=l[1],d=n?-1:1,g=o.useRef(r);g.current=r;var v=o.useCallback((function(){return a(!1)}),[]),h=o.useCallback((function(){if(u)switch(g.current){case le.Horizontal:s({left:d*u.scrollLeft,top:0});break;case le.Both:s({left:d*u.scrollLeft,top:u.scrollTop});break;case le.Vertical:default:s({left:0,top:u.scrollTop})}}),[u]);f((function(){p(t.current)})),f((function(){if(u)return u.addEventListener("scroll",h,Xe),function(){u.removeEventListener("scroll",h,Xe)}}),[u]);var m=o.useCallback((function(e,n){var r=t.current;if(r){var o={left:0,top:0};switch(g.current){case le.Horizontal:o.left=d*e.left;break;case le.Both:o.left=d*e.left,o.top=e.top;break;case le.Vertical:default:o.top=e.top}if(n)a(!0),function(e,t,n,r,o,a){void 0===o&&(o=function(e){return e}),void 0===a&&(a=function(){});var i=0,c=0;switch(t){case le.Horizontal:c=e.scrollLeft,i=0;case le.Both:c=e.scrollLeft,i=e.scrollTop;break;case le.Vertical:default:c=0,i=e.scrollTop}if(!(i===n.top&&t===le.Vertical||c===n.left&&t===le.Horizontal)){var s,l=-1,u=c-n.left,p=i-n.top,d=function(f){-1===l&&(l=f);var g=f-l,v=Math.min(g/r,1),h=o(v),m={left:c-u*h,top:i-p*h};switch(t){case le.Horizontal:e.scrollLeft=m.left;break;case le.Both:e.scrollLeft=m.left,e.scrollTop=m.top;break;case le.Vertical:default:e.scrollTop=m.top}Math.abs(m.top-n.top)<=Je&&Math.abs(m.left-n.left)<=Je&&a(),g<r?s=window.requestAnimationFrame(d):window.cancelAnimationFrame(s)};s=window.requestAnimationFrame(d)}}(r,g.current,o,400,Ye,v);else switch(g.current){case le.Horizontal:r.scrollLeft=o.left;break;case le.Both:r.scrollLeft=o.left,r.scrollTop=o.top;break;case le.Vertical:default:r.scrollTop=o.top}}}),[t]);return{scrollOffset:c,scrollTo:m}},$e=function(e,t,n){return Math.max(e,Math.min(n,t))},et=function(e,t){if(t!==exports.ViewMode.DualPageWithCover)return 0;if(!function(e){var t=e.length;if(1===t)return!1;for(var n=1;n<t;n++)if(e[n].height!==e[0].height||e[n].width!==e[0].width)return!0;return!1}(e))return 2*e[0].width;var n=J(e.slice(1),2).map((function(e){return 2===e.length?e[0].width+e[1].width:e[0].width})),r=[e[0].width].concat(n);return Math.max.apply(Math,r)},tt={left:0,top:0},nt={left:0,top:0},rt={left:0,top:0},ot={left:0,top:0},at={height:0,width:0},it={left:0,top:0},ct="data-virtual-index",st=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],lt=function(e){var t=e.isRtl,n=e.numberOfItems,r=e.parentRef,a=e.setStartRange,i=e.setEndRange,c=e.sizes,s=e.scrollMode,u=e.viewMode,p=o.useState(!1),d=p[0],g=p[1],v=o.useCallback((function(e){return g(e)}),[]),h=o.useRef(s);h.current=s;var m=o.useRef(u);m.current=u;var x=s===exports.ScrollMode.Wrapped||u===exports.ViewMode.DualPageWithCover||u===exports.ViewMode.DualPage?le.Both:s===exports.ScrollMode.Horizontal?le.Horizontal:le.Vertical,w=Qe({elementRef:r,isRtl:t,scrollDirection:x,onSmoothScroll:v}),_=w.scrollOffset,y=w.scrollTo,b=function(e){var t=e.elementRef,n=o.useState(t.current),r=n[0],a=n[1],i=o.useRef(!1),c=o.useReducer(Ge,{height:0,width:0}),s=c[0],l=c[1];return f((function(){t.current!==r&&a(t.current)})),f((function(){if(r&&!i.current){i.current=!0;var e=r.getBoundingClientRect(),t=e.height,n=e.width;l({rect:{height:t,width:n}})}}),[r]),o.useEffect((function(){if(r){var e=new ResizeObserver((function(e,t){e.forEach((function(e){if(e.target===r){var t=e.contentRect,n=t.height,o=t.width;l({rect:{height:n,width:o}})}}))}));return e.observe(r),function(){e.unobserve(r)}}}),[r]),s}({elementRef:r}),E=o.useRef({scrollOffset:it,measurements:[],parentRect:at,totalSize:at});E.current.scrollOffset=_,E.current.parentRect=b;var R=o.useMemo((function(){return Array(n).fill(-1)}),[]),P=o.useState(R),k=P[0],S=P[1],C=o.useMemo((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.isIntersecting?e.intersectionRatio:-1,r=e.target.getAttribute(ct);if(r){var o=parseInt(r,10);0<=o&&o<n&&S((function(e){return e[o]=t,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0)}))}}))}),{threshold:st});return e}),[]),M=o.useMemo((function(){return s===exports.ScrollMode.Page&&u===exports.ViewMode.SinglePage?function(e,t,n){for(var r=[],o=0;o<e;o++){var a={height:Math.max(t.height,n[o].height),width:Math.max(t.width,n[o].width)},i=0===o?ot:r[o-1].end,c={left:i.left+a.width,top:i.top+a.height};r[o]={index:o,start:i,size:a,end:c,visibility:-1}}return r}(n,b,c):u===exports.ViewMode.DualPageWithCover?function(e,t,n,r){for(var o=[],a=0,i=0,c=rt,s=0;s<e;s++){var l=0===s?{height:r===exports.ScrollMode.Page?Math.max(t.height,n[s].height):n[s].height,width:r===exports.ScrollMode.Page?Math.max(t.width,n[s].width):n[s].width}:{height:r===exports.ScrollMode.Page?Math.max(t.height,n[s].height):n[s].height,width:Math.max(t.width/2,n[s].width)};r===exports.ScrollMode.Page?c=0===s?rt:{left:s%2==0?l.width:0,top:Math.floor((s-1)/2)*l.height+o[0].end.top}:0===s?(c=rt,a=n[0].height,i=0):s%2==1?(c={left:0,top:a+=i},i=s===e-1?n[s].height:Math.max(n[s].height,n[s+1].height)):c={left:o[s-1].end.left,top:a};var u={left:c.left+l.width,top:c.top+l.height};o[s]={index:s,start:c,size:l,end:u,visibility:-1}}return o}(n,b,c,s):u===exports.ViewMode.DualPage?function(e,t,n,r){for(var o=[],a=0,i=0,c=nt,s=0;s<e;s++){var l={height:r===exports.ScrollMode.Page?Math.max(t.height,n[s].height):n[s].height,width:Math.max(t.width/2,n[s].width)};r===exports.ScrollMode.Page?c={left:s%2==0?0:l.width,top:Math.floor(s/2)*l.height}:s%2==0?(c={left:0,top:a+=i},i=s===e-1?n[s].height:Math.max(n[s].height,n[s+1].height)):c={left:o[s-1].end.left,top:a};var u={left:c.left+l.width,top:c.top+l.height};o[s]={index:s,start:c,size:l,end:u,visibility:-1}}return o}(n,b,c,s):function(e,t,n,r){for(var o=[],a=0,i={left:0,top:0},c=0,s=tt,l=0;l<e;l++){var u=n[l];if(0===l)a=u.width,i={left:0,top:0},c=u.height;else switch(r){case exports.ScrollMode.Wrapped:(a+=u.width)<t.width?(s={left:o[l-1].end.left,top:i.top},c=Math.max(c,u.height)):(a=u.width,i={left:(s={left:i.left,top:i.top+c}).left,top:s.top},c=u.height);break;case exports.ScrollMode.Horizontal:case exports.ScrollMode.Vertical:default:s=o[l-1].end}var p={left:s.left+u.width,top:s.top+u.height};o[l]={index:l,start:s,size:u,end:p,visibility:-1}}return o}(n,b,c,s)}),[s,c,u,b]),T=M[n-1]?{height:M[n-1].end.top,width:M[n-1].end.left}:at;E.current.measurements=M,E.current.totalSize=T;var L=function(e,t,n,r){var o=0;switch(e){case le.Horizontal:o=r.left;break;case le.Vertical:default:o=r.top}var a=t.length-1,i=function(e,t,n,r){for(;e<=t;){var o=(e+t)/2|0,a=r(o);if(a<n)e=o+1;else{if(!(a>n))return o;t=o-1}}return e>0?e-1:0}(0,a,o,(function(n){switch(e){case le.Horizontal:return t[n].start.left;case le.Both:case le.Vertical:default:return t[n].start.top}}));if(e===le.Both)for(var c=t[i].start.top;i-1>=0&&t[i-1].start.top===c&&t[i-1].start.left>=r.left;)i--;for(var s=i;s<=a;){var l={top:t[s].start.top-r.top,left:t[s].start.left-r.left},u={height:n.height-l.top,width:n.width-l.left};if(e===le.Horizontal&&u.width<0)break;if(e===le.Vertical&&u.height<0)break;if(e===le.Both&&(u.width<0||u.height<0))break;s++}return{start:i,end:s}}(x,E.current.measurements,E.current.parentRect,E.current.scrollOffset),O=L.start,D=L.end,I=k.slice($e(0,n,O),$e(0,n,D)),H=O+I.reduce((function(e,t,n,r){return t>r[e]?n:e}),0),A=H=$e(0,n-1,H),V=a(O),N=i(D);switch(u){case exports.ViewMode.DualPageWithCover:H>0&&(A=H%2==1?H:H-1),V=0===V?0:V%2==1?V:V-1,n-(N=N%2==1?N-1:N)<=2&&(N=n-1);break;case exports.ViewMode.DualPage:A=H%2==0?H:H-1,V=V%2==0?V:V-1,N=N%2==1?N:N-1;break;case exports.ViewMode.SinglePage:default:A=H}var z=o.useMemo((function(){for(var e=[],t=function(t){var n=M[t],r=l(l({},n),{visibility:void 0!==k[t]?k[t]:-1,measureRef:function(e){e&&(e.setAttribute(ct,"".concat(t)),C.observe(e))}});e.push(r)},n=V;n<=N;n++)t(n);return e}),[V,N,k,M]),B=o.useCallback((function(e,t){var r=E.current.measurements[$e(0,n-1,e)],o=h.current===exports.ScrollMode.Page?it:t;r&&y({left:o.left+r.start.left,top:o.top+r.start.top},!0)}),[y]),F=o.useCallback((function(e,t){var n=E.current.measurements,r=n[e].start,o=n.find((function(e){return e.start.top-r.top>1e-12}));if(o){var a=o.index;switch(m.current){case exports.ViewMode.DualPage:a=a%2==0?a:a+1;break;case exports.ViewMode.DualPageWithCover:a=a%2==1?a:a+1}B(a,t)}}),[]),W=o.useCallback((function(e,t){for(var r=E.current.measurements,o=r[e].start,a=e,i=!1,c=n-1;c>=0;c--)if(o.top-r[c].start.top>1e-12){i=!0,a=r[c].index;break}if(i){switch(m.current){case exports.ViewMode.DualPage:a=a%2==0?a:a-1;break;case exports.ViewMode.DualPageWithCover:a=a%2==0?a-1:a}a===e&&(a=e-1),B(a,t)}}),[]),j=o.useCallback((function(e,t){if(m.current!==exports.ViewMode.DualPageWithCover&&m.current!==exports.ViewMode.DualPage)switch(h.current){case exports.ScrollMode.Wrapped:F(e,t);break;case exports.ScrollMode.Horizontal:case exports.ScrollMode.Vertical:default:B(e+1,t)}else F(e,t)}),[]),q=o.useCallback((function(e,t){if(m.current!==exports.ViewMode.DualPageWithCover&&m.current!==exports.ViewMode.DualPage)switch(h.current){case exports.ScrollMode.Wrapped:W(e,t);break;case exports.ScrollMode.Horizontal:case exports.ScrollMode.Vertical:default:B(e-1,t)}else W(e,t)}),[]),U=o.useCallback((function(){return function(e,t){switch(t){case exports.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(e.width,"px")};case exports.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(e.height,"px"),width:"100%"}}}(T,h.current)}),[T]),Z=o.useCallback((function(e){return function(e,t,n){return n!==exports.ScrollMode.Page?{}:{height:"".concat(t.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(e.start.top,"px)")}}(e,b,h.current)}),[b]),G=o.useCallback((function(e){return function(e,t,n,r,o){var a,i,c,s,l,u,p,d=t?"right":"left",f=t?-1:1,g=n.length,v=e.start.left*f,h=e.size,m=h.height,x=h.width;if(r===exports.ViewMode.DualPageWithCover){var w=o===exports.ScrollMode.Page?0:e.start.top;return 0===e.index||g%2==0&&e.index===g-1?((a={height:"".concat(m,"px"),minWidth:"".concat(et(n,r),"px"),width:"100%"})[d]=0,a.position="absolute",a.top=0,a.transform="translate(".concat(v,"px, ").concat(w,"px)"),a):((i={height:"".concat(m,"px"),width:"".concat(x,"px")})[d]=0,i.position="absolute",i.top=0,i.transform="translate(".concat(v,"px, ").concat(w,"px)"),i)}if(r===exports.ViewMode.DualPage)return(c={height:"".concat(m,"px"),width:"".concat(x,"px")})[d]=0,c.position="absolute",c.top=0,c.transform="translate(".concat(v,"px, ").concat(o===exports.ScrollMode.Page?0:e.start.top,"px)"),c;switch(o){case exports.ScrollMode.Horizontal:return(s={height:"100%",width:"".concat(x,"px")})[d]=0,s.position="absolute",s.top=0,s.transform="translateX(".concat(v,"px)"),s;case exports.ScrollMode.Page:return(l={height:"".concat(m,"px"),width:"".concat(x,"px")})[d]=0,l.position="absolute",l.top=0,l;case exports.ScrollMode.Wrapped:return(u={height:"".concat(m,"px"),width:"".concat(x,"px")})[d]=0,u.position="absolute",u.top=0,u.transform="translate(".concat(v,"px, ").concat(e.start.top,"px)"),u;case exports.ScrollMode.Vertical:default:return(p={height:"".concat(m,"px"),width:"100%"})[d]=0,p.position="absolute",p.top=0,p.transform="translateY(".concat(e.start.top,"px)"),p}}(e,t,c,m.current,h.current)}),[t,c]),Y=o.useCallback((function(e,t){var r=E.current,o=r.measurements,a=r.scrollOffset,i=o[$e(0,n-1,t)];if(i){var c=h.current===exports.ScrollMode.Page?{left:i.start.left,top:i.start.top}:{left:a.left*e,top:a.top*e};y(c,!1)}}),[]);return o.useEffect((function(){return function(){C.disconnect()}}),[]),{boundingClientRect:b,isSmoothScrolling:d,startIndex:O,startRange:V,endIndex:D,endRange:N,maxVisbilityIndex:A,virtualItems:z,getContainerStyles:U,getItemContainerStyles:Z,getItemStyles:G,scrollToItem:B,scrollToNextItem:j,scrollToPreviousItem:q,zoom:Y}},ut=function(e,t,n,r,o,a){var i=n;switch(!0){case o===exports.ViewMode.DualPageWithCover&&a>=3:case o===exports.ViewMode.DualPage&&a>=3:i=2*n;break;default:i=n}switch(r){case exports.SpecialZoomLevel.ActualSize:return 1;case exports.SpecialZoomLevel.PageFit:return Math.min((e.clientWidth-17)/i,(e.clientHeight-16)/t);case exports.SpecialZoomLevel.PageWidth:return(e.clientWidth-17)/i}},pt=function(e){var t=[];return e.map((function(e){t=t.concat(e).concat(function(e){var t=[];return e.items&&e.items.length>0&&(t=t.concat(pt(e.items))),t}(e))})),t},dt={buildPageStyles:function(){return{}},transformSize:function(e){return e.size}},ft={left:0,top:0},gt=function(e){var t=e.currentFile,n=e.defaultScale,r=e.doc,a=e.initialPage,i=e.initialRotation,c=e.initialScale,s=e.pageLayout,u=e.pageSizes,g=e.plugins,v=e.renderPage,h=e.scrollMode,m=e.viewMode,x=e.viewerState,w=e.onDocumentLoad,b=e.onOpenFile,E=e.onPageChange,P=e.onRotate,S=e.onRotatePage,C=e.onZoom,M=r.numPages,T=r.loadingTask.docId,L=o.useContext(k).l10n,O=o.useContext(p),D=O.direction===exports.TextDirection.RightToLeft,I=o.useRef(),H=o.useRef(),A=o.useState(a),V=A[0],N=A[1],z=o.useRef(null),B=o.useState(i),F=B[0],W=B[1],j=y(F),q=o.useState(!1),U=q[0],Z=q[1],G=o.useState(new Map),Y=G[0],K=G[1],$=o.useState(h),ee=$[0],ne=$[1],re=y(ee),oe=o.useState(m),ae=oe[0],ie=oe[1],ce=y(ae),se=function(e){var t=_(),n=o.useState([]),r=n[0],a=n[1];return o.useEffect((function(){e.getOutline().then((function(e){if(t.current&&null!==e){var n=pt(e);a(n)}}))}),[]),r}(r),le=o.useState(c),ue=le[0],pe=le[1],de=y(ue),fe=o.useRef(x),ge=o.useRef("string"==typeof n?n:null),ve=o.useState(-1),he=ve[0],me=ve[1],xe=o.useState(0),we=xe[0],_e=xe[1],ye=R({doc:r});o.useEffect((function(){return function(){X.clear(),Q.clear()}}),[T]);var be,Ee,Re,Pe,ke=o.useMemo((function(){return Object.assign({},dt,s)}),[]),Se=o.useMemo((function(){return Array(M).fill(0).map((function(e,t){var n=[u[t].pageHeight,u[t].pageWidth],r=Math.abs(F)%180==0?{height:n[0],width:n[1]}:{height:n[1],width:n[0]},o={height:r.height*ue,width:r.width*ue};return ke.transformSize({numPages:M,pageIndex:t,size:o})}))}),[F,ue]),Ce=o.useCallback((function(e){return Math.max(e-3,0)}),[]),Me=o.useCallback((function(e){return Math.min(e+3,M-1)}),[M]),Te=lt({isRtl:D,numberOfItems:M,parentRef:H,scrollMode:ee,setStartRange:Ce,setEndRange:Me,sizes:Se,viewMode:ae}),Le=(be=function(e){ge.current&&(me(-1),qe(ge.current))},Ee=200,Re=o.useRef(),Pe=function(){Re.current&&clearTimeout(Re.current)},o.useEffect((function(){return function(){return Pe()}}),[]),o.useCallback((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Pe(),Re.current=setTimeout((function(){be.apply(void 0,e)}),Ee)}),[be,Ee]));!function(e){var t=e.targetRef,n=e.onResize;f((function(){var e=new ResizeObserver((function(e){e.forEach((function(e){n(e.target)}))})),r=t.current;if(r)return e.observe(r),function(){e.unobserve(r)}}),[])}({targetRef:H,onResize:Le});var Oe=function(e){var t=e;g.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),fe.current=t},De=function(){return H.current},Ie=function(){return fe.current},He=o.useCallback((function(e,t,n,o){var a=H.current,i=fe.current;a&&i&&te(r,e).then((function(r){var c=r.getViewport({scale:1}),s=0,l=("function"==typeof t?t(c.width,c.height):t)||0,p=("function"==typeof n?n(c.width,c.height):n)||0,d=i.scale;switch(o){case exports.SpecialZoomLevel.PageFit:s=0,p=0,qe(exports.SpecialZoomLevel.PageFit);break;case exports.SpecialZoomLevel.PageWidth:d=ut(a,u[e].pageHeight,u[e].pageWidth,exports.SpecialZoomLevel.PageWidth,m,M),s=(c.height-l)*d,p*=d,qe(d);break;default:s=(c.height-l)*d,p*=d}switch(i.scrollMode){case exports.ScrollMode.Horizontal:Te.scrollToItem(e,{left:p,top:0});break;case exports.ScrollMode.Vertical:default:Te.scrollToItem(e,{left:0,top:s})}}))}),[]),Ae=o.useCallback((function(){Te.scrollToNextItem(fe.current.pageIndex,ft)}),[]),Ve=o.useCallback((function(e){0<=e&&e<M&&Te.scrollToItem(e,ft)}),[]),Ne=o.useCallback((function(){Te.scrollToPreviousItem(fe.current.pageIndex,ft)}),[]),ze=o.useCallback((function(e){var t,n;"pdf"===(t=e.name,n=t.split(/\./).pop(),n?n.toLowerCase():"").toLowerCase()&&new Promise((function(t){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){var e=new Uint8Array(n.result);t(e)}})).then((function(t){b(e.name,t)}))}),[b]),Be=o.useCallback((function(e){var t=e===exports.RotateDirection.Backward?-90:90,n=fe.current.rotation,o=360===n||-360===n?t:n+t;ye.markNotRendered(),W(o),Oe(l(l({},fe.current),{rotation:o})),P({direction:e,doc:r,rotation:o})}),[]),Fe=o.useCallback((function(e,t){var n=t===exports.RotateDirection.Backward?-90:90,o=fe.current.pagesRotation,a=(o.has(e)?o.get(e):i)+n,c=o.set(e,a);K(c),Z((function(e){return!e})),Oe(l(l({},fe.current),{pagesRotation:c,rotatedPage:e})),S({direction:t,doc:r,pageIndex:e,rotation:a}),ye.markRendering(e),me(e)}),[]),We=o.useCallback((function(e){Oe(l(l({},fe.current),{scrollMode:e})),ne(e)}),[]),je=o.useCallback((function(e){Oe(l(l({},fe.current),{viewMode:e})),ie(e)}),[]),qe=o.useCallback((function(e){var t=H.current,n=fe.current.pageIndex;if(!(n<0||n>=M)){var o=u[n].pageHeight,a=u[n].pageWidth,i=t?"string"==typeof e?ut(t,o,a,e,fe.current.viewMode,M):e:1;ge.current="string"==typeof e?e:null,i!==fe.current.scale&&(_e((function(e){return e+1})),ye.markNotRendered(),pe(i),C({doc:r,scale:i}),Oe(l(l({},fe.current),{scale:i})))}}),[]);o.useEffect((function(){var e={getPagesContainer:De,getViewerState:Ie,jumpToDestination:He,jumpToNextPage:Ae,jumpToPreviousPage:Ne,jumpToPage:Ve,openFile:ze,rotate:Be,rotatePage:Fe,setViewerState:Oe,switchScrollMode:We,switchViewMode:je,zoom:qe};return g.forEach((function(t){t.install&&t.install(e)})),function(){g.forEach((function(t){t.uninstall&&t.uninstall(e)}))}}),[T]),o.useEffect((function(){w({doc:r,file:t}),g.forEach((function(e){e.onDocumentLoad&&e.onDocumentLoad({doc:r,file:t})}))}),[T]),f((function(){var e=Te.boundingClientRect;e.height>0&&e.width>0&&a&&Ve(a)}),[T,Te.boundingClientRect]),f((function(){var e=fe.current.pageIndex;e>-1&&re!==ee&&Te.scrollToItem(e,ft)}),[ee]),f((function(){var e=fe.current.pageIndex;e>-1&&j!==F&&Te.scrollToItem(e,ft)}),[F]),f((function(){0!=de&&de!=fe.current.scale&&Te.zoom(fe.current.scale/de,fe.current.pageIndex)}),[ue]),f((function(){if(ce!==fe.current.viewMode){var e=Te.startRange,t=Te.endRange,n=Te.virtualItems;ye.markNotRendered(),ye.setRange(e,t);for(var r=function(e){var t=n.find((function(t){return t.index===e}));t&&ye.setVisibility(e,t.visibility)},o=e;o<=t;o++)r(o);Ge()}}),[ae]),f((function(){var e=fe.current.pageIndex;e>-1&&ce!==ae&&Te.scrollToItem(e,ft)}),[ae]),o.useEffect((function(){Te.isSmoothScrolling||null!==z.current&&z.current===V||(z.current=V,E({currentPage:V,doc:r}))}),[V,Te.isSmoothScrolling]),o.useEffect((function(){var e=Te.startRange,t=Te.endRange,n=Te.maxVisbilityIndex,r=Te.virtualItems,o=n;N(o),Oe(l(l({},fe.current),{pageIndex:o})),ye.setRange(e,t);for(var a=function(e){var t=r.find((function(t){return t.index===e}));t&&ye.setVisibility(e,t.visibility)},i=e;i<=t;i++)a(i);Ge()}),[Te.startRange,Te.endRange,Te.maxVisbilityIndex,U,F,ue]);var Ue=o.useCallback((function(e){ye.markRendered(e),Ge()}),[we]),Ge=function(){var e=ye.getHighestPriorityPage();e>-1&&ye.isInRange(e)&&(ye.markRendering(e),me(e))},Ye=function(e){var t=V-1,n=V+1;switch(e){case"FirstPage":Ve(0);break;case"LastPage":Ve(M-1);break;case"NextPage":n<M&&Ve(n);break;case"PrevPage":t>=0&&Ve(t)}},Je=o.useCallback((function(){var e=Te.virtualItems,t=[];switch(ae){case exports.ViewMode.DualPage:t=J(e,2);break;case exports.ViewMode.DualPageWithCover:e.length&&(t=0===e[0].index?[[e[0]]].concat(J(e.slice(1),2)):J(e,2));break;case exports.ViewMode.SinglePage:default:t=J(e,1)}var n=L&&L.core?L.core.pageLabel:"Page {{pageIndex}}",a={attrs:{"data-testid":"core__inner-container",ref:I,style:{height:"100%"}},children:o.createElement(o.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:d({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":ee===exports.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":D,"rpv-core__inner-pages--single":ee===exports.ScrollMode.Page,"rpv-core__inner-pages--vertical":ee===exports.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":ee===exports.ScrollMode.Wrapped}),ref:H,style:{height:"100%",position:"relative"}},children:o.createElement("div",{style:Object.assign({"--scale-factor":ue},Te.getContainerStyles())},t.map((function(e){return o.createElement("div",{className:d({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":ee===exports.ScrollMode.Page}),style:Te.getItemContainerStyles(e[0]),key:"".concat(e[0].index,"-").concat(ae)},e.map((function(e){var t=ae===exports.ViewMode.DualPageWithCover&&(0===e.index||M%2==0&&e.index===M-1);return o.createElement("div",{"aria-label":n.replace("{{pageIndex}}","".concat(e.index+1)),className:d({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":ae===exports.ViewMode.DualPage&&e.index%2==0,"rpv-core__inner-page--dual-odd":ae===exports.ViewMode.DualPage&&e.index%2==1,"rpv-core__inner-page--dual-cover":t,"rpv-core__inner-page--dual-cover-even":ae===exports.ViewMode.DualPageWithCover&&!t&&e.index%2==0,"rpv-core__inner-page--dual-cover-odd":ae===exports.ViewMode.DualPageWithCover&&!t&&e.index%2==1,"rpv-core__inner-page--single":ae===exports.ViewMode.SinglePage&&ee===exports.ScrollMode.Page}),role:"region",key:"".concat(e.index,"-").concat(ae),style:Object.assign({},Te.getItemStyles(e),ke.buildPageStyles({numPages:M,pageIndex:e.index,scrollMode:ee,viewMode:ae}))},o.createElement(Ze,{doc:r,measureRef:e.measureRef,outlines:se,pageIndex:e.index,pageRotation:Y.has(e.index)?Y.get(e.index):0,pageSize:u[e.index],plugins:g,renderPage:v,renderQueueKey:we,rotation:F,scale:ue,shouldRender:he===e.index,viewMode:ae,onExecuteNamedAction:Ye,onJumpToDest:He,onRenderCompleted:Ue,onRotatePage:Fe}))})))})))}};return g.forEach((function(e){e.renderViewer&&(a=e.renderViewer({containerRef:I,doc:r,pagesContainerRef:H,pagesRotation:Y,pageSizes:u,rotation:F,slot:a,themeContext:O,jumpToPage:Ve,openFile:ze,rotate:Be,rotatePage:Fe,switchScrollMode:We,switchViewMode:je,zoom:qe}))})),a}),[g,Te]),Ke=o.useCallback((function(e){return o.createElement("div",l({},e.attrs,{style:e.attrs&&e.attrs.style?e.attrs.style:{}}),e.children,e.subSlot&&Ke(e.subSlot))}),[]);return Ke(Je())},vt=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ht=function(e){var t=e.defaultScale,n=e.doc,r=e.render,a=e.scrollMode,i=e.viewMode,c=o.useRef(),s=o.useState({pageSizes:[],scale:0}),l=s[0],u=s[1];return o.useLayoutEffect((function(){var e=Array(n.numPages).fill(0).map((function(e,t){return new Promise((function(e,r){te(n,t).then((function(t){var n=t.getViewport({scale:1});e({pageHeight:n.height,pageWidth:n.width,rotation:n.rotation})}))}))}));Promise.all(e).then((function(e){var r=c.current;if(r&&0!==e.length){var o=e[0].pageWidth,s=e[0].pageHeight,l=r.parentElement,p=(l.clientWidth-45)/o,d=(l.clientHeight-45)/s,f=p;switch(a){case exports.ScrollMode.Horizontal:f=Math.min(p,d);break;case exports.ScrollMode.Vertical:default:f=p}var g,v,h=t?"string"==typeof t?ut(l,s,o,t,i,n.numPages):t:(g=f,-1===(v=vt.findIndex((function(e){return e>=g})))||0===v?g:vt[v-1]);u({pageSizes:e,scale:h})}}))}),[n.loadingTask.docId]),0===l.pageSizes.length||0===l.scale?o.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:c},o.createElement(x,null)):r(l.pageSizes,l.scale)},mt=function(){},xt=function(e){function t(t,n){var r=e.call(this)||this;return r.verifyPassword=t,r.passwordStatus=n,r}return c(t,e),t}(mt),wt=function(e){var t=e.passwordStatus,n=e.renderProtectedView,r=e.verifyPassword,a=e.onDocumentAskPassword,i=o.useContext(k).l10n,c=o.useState(""),s=c[0],l=c[1],u=o.useContext(p).direction===exports.TextDirection.RightToLeft,f=function(){return r(s)};return o.useEffect((function(){a&&a({verifyPassword:r})}),[]),n?n({passwordStatus:t,verifyPassword:r}):o.createElement("div",{className:"rpv-core__asking-password-wrapper"},o.createElement("div",{className:d({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":u})},o.createElement("div",{className:"rpv-core__asking-password-message"},t===exports.PasswordStatus.RequiredPassword&&i.core.askingPassword.requirePasswordToOpen,t===exports.PasswordStatus.WrongPassword&&i.core.wrongPassword.tryAgain),o.createElement("div",{className:"rpv-core__asking-password-body"},o.createElement("div",{className:d({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!u,"rpv-core__asking-password-input--rtl":u})},o.createElement(w,{testId:"core__asking-password-input",type:"password",value:s,onChange:l,onKeyDown:function(e){"Enter"===e.key&&f()}})),o.createElement(m,{onClick:f},i.core.askingPassword.submit))))},_t=function(e){function t(t){var n=e.call(this)||this;return n.doc=t,n}return c(t,e),t}(mt),yt=function(e){function t(t){var n=e.call(this)||this;return n.error=t,n}return c(t,e),t}(mt),bt=function(e){function t(t){var n=e.call(this)||this;return n.percentages=t,n}return c(t,e),t}(mt),Et=function(e){var t=e.characterMap,n=e.file,r=e.httpHeaders,i=e.render,c=e.renderError,s=e.renderLoader,l=e.renderProtectedView,u=e.transformGetDocumentParams,f=e.withCredentials,g=e.onDocumentAskPassword,v=o.useContext(p).direction===exports.TextDirection.RightToLeft,h=o.useState(new bt(0)),m=h[0],w=h[1],y=o.useRef(""),b=_();return o.useEffect((function(){y.current="",w(new bt(0));var e=new a.PDFWorker({name:"PDFWorker_".concat(Date.now())}),o=Object.assign({httpHeaders:r,withCredentials:f,worker:e},"string"==typeof n?{url:n}:{data:n},t?{cMapUrl:t.url,cMapPacked:t.isCompressed}:{}),i=u?u(o):o,c=a.getDocument(i);return c.onPassword=function(e,t){switch(t){case a.PasswordResponses.NEED_PASSWORD:b.current&&w(new xt(e,exports.PasswordStatus.RequiredPassword));break;case a.PasswordResponses.INCORRECT_PASSWORD:b.current&&w(new xt(e,exports.PasswordStatus.WrongPassword))}},c.onProgress=function(e){var t=e.total>0?Math.min(100,100*e.loaded/e.total):100;b.current&&""===y.current&&w(new bt(t))},c.promise.then((function(e){y.current=e.loadingTask.docId,b.current&&w(new _t(e))}),(function(t){return b.current&&!e.destroyed&&w(new yt({message:t.message||"Cannot load document",name:t.name}))})),function(){c.destroy(),e.destroy()}}),[n]),m instanceof xt?o.createElement(wt,{passwordStatus:m.passwordStatus,renderProtectedView:l,verifyPassword:m.verifyPassword,onDocumentAskPassword:g}):m instanceof _t?i(m.doc):m instanceof yt?c?c(m.error):o.createElement("div",{className:d({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":v})},o.createElement("div",{className:"rpv-core__doc-error-text"},m.error.message)):o.createElement("div",{"data-testid":"core__doc-loading",className:d({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":v})},s?s(m.percentages):o.createElement(x,null))},Rt=function(e,t){var n=o.useMemo((function(){return"auto"===e?"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}),[]),r=o.useState(n),a=r[0],i=r[1],c=y(a);return o.useEffect((function(){if("auto"===e){var t=window.matchMedia("(prefers-color-scheme: dark)"),n=function(e){i(e.matches?"dark":"light")};return t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}}),[]),o.useEffect((function(){a!==c&&t&&t(a)}),[a]),o.useEffect((function(){e!==a&&i(e)}),[e]),{currentTheme:a,setCurrentTheme:i}};exports.Button=function(e){var t=e.children,n=e.testId,r=e.onClick,a=o.useContext(p).direction===exports.TextDirection.RightToLeft,i=n?{"data-testid":n}:{};return o.createElement("button",l({className:d({"rpv-core__button":!0,"rpv-core__button--rtl":a}),type:"button",onClick:r},i),t)},exports.Icon=v,exports.LazyRender=function(e){var t=e.attrs,n=e.children,r=e.testId,a=o.useState(!1),i=a[0],c=a[1],s=r?l(l({},t),{"data-testid":r}):t,u=g({once:!0,onVisibilityChanged:function(e){e.isVisible&&c(!0)}});return o.createElement("div",l({ref:u},s),i&&n)},exports.LocalizationContext=k,exports.Menu=function(e){var t=e.children,n=o.useRef(),r=o.useRef([]),a=o.useContext(p).direction===exports.TextDirection.RightToLeft,i=function(e){if(n.current)switch(e.key){case"Tab":e.preventDefault();break;case"ArrowDown":e.preventDefault(),c((function(e,t){return t+1}));break;case"ArrowUp":e.preventDefault(),c((function(e,t){return t-1}));break;case"End":e.preventDefault(),c((function(e,t){return e.length-1}));break;case"Home":e.preventDefault(),c((function(e,t){return 0}))}},c=function(e){if(n.current){var t=r.current,o=t.findIndex((function(e){return"0"===e.getAttribute("tabindex")})),a=Math.min(t.length-1,Math.max(0,e(t,o)));o>=0&&o<=t.length-1&&t[o].setAttribute("tabindex","-1"),t[a].setAttribute("tabindex","0"),t[a].focus()}};return f((function(){var e=n.current;if(e){var t=function(e){var t=[];return e.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(n){if(n instanceof HTMLElement){var r=n.parentElement;(r===e||"none"!==window.getComputedStyle(r).display)&&t.push(n)}})),t}(e);r.current=t}}),[]),f((function(){return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[]),o.createElement("div",{ref:n,"aria-orientation":"vertical",className:d({"rpv-core__menu":!0,"rpv-core__menu--rtl":a}),role:"menu",tabIndex:0},t)},exports.MenuDivider=function(){return o.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},exports.MenuItem=function(e){var t=e.checked,n=void 0!==t&&t,r=e.children,a=e.icon,i=void 0===a?null:a,c=e.isDisabled,s=void 0!==c&&c,u=e.testId,f=e.onClick,g=o.useContext(p).direction===exports.TextDirection.RightToLeft,v=u?{"data-testid":u}:{};return o.createElement("button",l({className:d({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":s,"rpv-core__menu-item--ltr":!g,"rpv-core__menu-item--rtl":g}),role:"menuitem",tabIndex:-1,type:"button",onClick:f},v),o.createElement("div",{className:d({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!g,"rpv-core__menu-item-icon--rtl":g})},i),o.createElement("div",{className:d({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!g,"rpv-core__menu-item-label--rtl":g})},r),o.createElement("div",{className:d({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!g,"rpv-core__menu-item-check--rtl":g})},n&&o.createElement(h,null)))},exports.MinimalButton=function(e){var t=e.ariaLabel,n=void 0===t?"":t,r=e.ariaKeyShortcuts,a=void 0===r?"":r,i=e.children,c=e.isDisabled,s=void 0!==c&&c,u=e.isSelected,f=void 0!==u&&u,g=e.testId,v=e.onClick,h=o.useContext(p).direction===exports.TextDirection.RightToLeft,m=g?{"data-testid":g}:{};return o.createElement("button",l({"aria-label":n},a&&{"aria-keyshortcuts":a},s&&{"aria-disabled":!0},{className:d({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":s,"rpv-core__minimal-button--rtl":h,"rpv-core__minimal-button--selected":f}),type:"button",onClick:v},m),i)},exports.Modal=function(e){var t=e.ariaControlsSuffix,n=e.closeOnClickOutside,r=e.closeOnEscape,a=e.content,i=e.isOpened,c=void 0!==i&&i,s=e.target,l=t||"".concat(C());return o.createElement(H,{target:s?function(e,t){return o.createElement("div",{"aria-expanded":t?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(l)},s(e,t))}:null,content:function(e){return o.createElement(O,null,o.createElement(L,{ariaControlsSuffix:l,closeOnClickOutside:n,closeOnEscape:r,onToggle:e},a(e)))},isOpened:c})},exports.Popover=function(e){var t=e.ariaHasPopup,n=void 0===t?"dialog":t,r=e.ariaControlsSuffix,a=e.closeOnClickOutside,i=e.closeOnEscape,c=e.content,s=e.lockScroll,l=void 0===s||s,u=e.offset,p=e.position,d=e.target,f=I(!1),g=f.opened,v=f.toggle,h=o.useRef(),m=o.useMemo((function(){return r||"".concat(C())}),[]);return o.createElement("div",{ref:h,"aria-expanded":g?"true":"false","aria-haspopup":n,"aria-controls":"rpv-core__popver-body-".concat(m)},d(v,g),g&&o.createElement(o.Fragment,null,l&&o.createElement(Z,{closeOnEscape:i,onClose:v}),o.createElement(U,{ariaControlsSuffix:m,closeOnClickOutside:a,offset:u,position:p,targetRef:h,onClose:v},c(v))))},exports.PrimaryButton=m,exports.ProgressBar=function(e){var t=e.progress,n=o.useContext(p).direction===exports.TextDirection.RightToLeft;return o.createElement("div",{className:d({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":n})},o.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(t,"%")}},t,"%"))},exports.Separator=function(){return o.createElement("div",{className:"rpv-core__separator"})},exports.Spinner=x,exports.Splitter=function(e){var t=e.constrain,n=o.useContext(p).direction===exports.TextDirection.RightToLeft,r=o.useRef(),a=o.useRef(),i=o.useRef(),c=o.useRef(0),s=o.useRef(0),l=o.useRef(0),u=o.useRef(0),d={capture:!0},f=function(e){var o=r.current,s=a.current,p=i.current;if(o&&s&&p){var d=u.current,f=e.clientX-c.current,g=l.current+(n?-f:f),v=o.parentElement.getBoundingClientRect().width,h=100*g/v;if(o.classList.add("rpv-core__splitter--resizing"),t){var m=v-g-d;if(!t({firstHalfPercentage:h,firstHalfSize:g,secondHalfPercentage:100*m/v,secondHalfSize:m}))return}s.style.width="".concat(h,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),s.classList.add("rpv-core__splitter-sibling--resizing"),p.classList.add("rpv-core__splitter-sibling--resizing")}},g=function(e){var t=r.current,n=a.current,o=i.current;t&&n&&o&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),t.classList.remove("rpv-core__splitter--resizing"),n.classList.remove("rpv-core__splitter-sibling--resizing"),o.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",f,d),document.removeEventListener("mouseup",g,d))};return o.useEffect((function(){var e=r.current;e&&(u.current=e.getBoundingClientRect().width,a.current=e.previousElementSibling,i.current=e.nextElementSibling)}),[]),o.createElement("div",{ref:r,className:"rpv-core__splitter",onMouseDown:function(e){var t=a.current;t&&(c.current=e.clientX,s.current=e.clientY,l.current=t.getBoundingClientRect().width,document.addEventListener("mousemove",f,d),document.addEventListener("mouseup",g,d))}})},exports.TextBox=w,exports.ThemeContext=p,exports.Tooltip=function(e){var t=e.ariaControlsSuffix,n=e.content,r=e.offset,a=e.position,i=e.target,c=I(!1),s=c.opened,l=c.toggle,u=o.useRef(),p=o.useRef(),d=o.useMemo((function(){return t||"".concat(C())}),[]);T((function(){u.current&&document.activeElement&&u.current.contains(document.activeElement)&&g()}));var f=function(){l(exports.ToggleStatus.Open)},g=function(){l(exports.ToggleStatus.Close)};return o.createElement(o.Fragment,null,o.createElement("div",{ref:u,"aria-describedby":"rpv-core__tooltip-body-".concat(d),onBlur:function(e){e.relatedTarget instanceof HTMLElement&&e.currentTarget.parentElement&&e.currentTarget.parentElement.contains(e.relatedTarget)?p.current&&(p.current.style.display="none"):g()},onFocus:f,onMouseEnter:f,onMouseLeave:g},i),s&&o.createElement(G,{ariaControlsSuffix:d,contentRef:p,offset:r,position:a,targetRef:u},n()))},exports.Viewer=function(e){var t=e.characterMap,n=e.defaultScale,r=e.fileUrl,a=e.httpHeaders,i=void 0===a?{}:a,c=e.initialPage,s=void 0===c?0:c,l=e.pageLayout,u=e.initialRotation,d=void 0===u?0:u,f=e.localization,v=e.plugins,h=void 0===v?[]:v,m=e.renderError,x=e.renderLoader,w=e.renderPage,_=e.renderProtectedView,b=e.scrollMode,E=void 0===b?exports.ScrollMode.Vertical:b,R=e.transformGetDocumentParams,S=e.theme,C=void 0===S?{direction:exports.TextDirection.LeftToRight,theme:"light"}:S,M=e.viewMode,T=void 0===M?exports.ViewMode.SinglePage:M,L=e.withCredentials,O=void 0!==L&&L,D=e.onDocumentAskPassword,I=e.onDocumentLoad,H=void 0===I?function(){}:I,A=e.onPageChange,V=void 0===A?function(){}:A,N=e.onRotate,z=void 0===N?function(){}:N,B=e.onRotatePage,F=void 0===B?function(){}:B,W=e.onSwitchTheme,j=void 0===W?function(){}:W,q=e.onZoom,U=void 0===q?function(){}:q,Z=o.useState({data:r,name:"string"==typeof r?r:"",shouldLoad:!1}),G=Z[0],Y=Z[1],J=function(e,t){Y({data:t,name:e,shouldLoad:!0})},K=o.useState(!1),X=K[0],Q=K[1],$=y(G);o.useEffect((function(){var e,t,n,o;e=$.data,o=typeof(t=r),"string"===(n=typeof e)&&"string"===o&&e===t||"object"===n&&"object"===o&&e.length===t.length&&e.every((function(e,n){return e===t[n]}))||Y({data:r,name:"string"==typeof r?r:"",shouldLoad:X})}),[r,X]);var ee=g({onVisibilityChanged:function(e){Q(e.isVisible),e.isVisible&&Y((function(e){return Object.assign({},e,{shouldLoad:!0})}))}}),te="string"==typeof C?{direction:exports.TextDirection.LeftToRight,theme:C}:C,ne=o.useState(f||P),re=ne[0],oe=ne[1],ae={l10n:re,setL10n:oe},ie=Object.assign({},{direction:te.direction},Rt(te.theme||"light",j));return o.useEffect((function(){f&&oe(f)}),[f]),o.createElement(k.Provider,{value:ae},o.createElement(p.Provider,{value:ie},o.createElement("div",{ref:ee,className:"rpv-core__viewer rpv-core__viewer--".concat(ie.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},G.shouldLoad&&o.createElement(Et,{characterMap:t,file:G.data,httpHeaders:i,render:function(e){return o.createElement(ht,{defaultScale:n,doc:e,render:function(t,r){return o.createElement(gt,{currentFile:{data:G.data,name:G.name},defaultScale:n,doc:e,initialPage:s,initialRotation:d,initialScale:r,pageLayout:l,pageSizes:t,plugins:h,renderPage:w,scrollMode:E,viewMode:T,viewerState:{file:G,pageIndex:-1,pageHeight:t[0].pageHeight,pageWidth:t[0].pageWidth,pagesRotation:new Map,rotation:d,scale:r,scrollMode:E,viewMode:T},onDocumentLoad:H,onOpenFile:J,onPageChange:V,onRotate:z,onRotatePage:F,onZoom:U})},scrollMode:E,viewMode:T})},renderError:m,renderLoader:x,renderProtectedView:_,transformGetDocumentParams:R,withCredentials:O,onDocumentAskPassword:D}))))},exports.Worker=function(e){var t=e.children,n=e.workerUrl;return a.GlobalWorkerOptions.workerSrc=n,o.createElement(o.Fragment,null,t)},exports.chunk=J,exports.classNames=d,exports.createStore=function(e){var t=e||{},n={},r=function(e,r){var o;t=l(l({},t),((o={})[e]=r,o)),(n[e]||[]).forEach((function(n){return n(t[e])}))},o=function(e){return t[e]};return{subscribe:function(e,t){n[e]=(n[e]||[]).concat(t)},unsubscribe:function(e,t){n[e]=(n[e]||[]).filter((function(e){return e!==t}))},update:function(e,t){r(e,t)},updateCurrentValue:function(e,t){var n=o(e);void 0!==n&&r(e,t(n))},get:function(e){return o(e)}}},exports.getDestination=ne,exports.getPage=te,exports.isMac=function(){return"undefined"!=typeof window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},exports.useIntersectionObserver=g,exports.useIsMounted=_,exports.useIsomorphicLayoutEffect=f,exports.usePrevious=y,exports.useRenderQueue=R;
